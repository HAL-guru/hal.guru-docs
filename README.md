# hal.guru

The repository contains a technical description of creating AI agents on the hal.guru platform. You can view the generated documentation at: [https://docs.hal.guru/](https://docs.hal.guru/)

> NOTE: Feel free to submit **Pull Request**!

## Installation

The documentation is built with `mkdocs`ś (material theme) and `mkdocs-macros-plugin`. Macros let you inject variables, simple logic, and external data into Markdown pages, making docs more dynamic and easier to maintain.

Prerequisites:

- Python 3.8+
- pip or pipx

```bash
pip install mkdocs-material mkdocs-macros-plugin
```

## Run locally

Live-reload dev server:

```bash
mkdocs serve
```

Production build (to site/):

```bash
bash mkdocs build --clean
```

## Project structure

- `mkdocs.yml` – main mkdocs config
- `docs/` – documentation sources (Markdown, media)
- `docs/assets/` – images, styles, extra assets
- `docs/halguru-cli` - hal.guru CLI documentation (mostly [auto-generated](#auto-generated-documentation))
- `docs/models` - hal.guru YAML files documentation (mostly [auto-generated](#auto-generated-documentation))`
- `docs/schemas` - hal.guru YAML schemas for Visual Studio Code ([auto-generated](#auto-generated-documentation))
- `macros.py` – macro and variable definitions for `mkdocs-macros-plugin`
- `site/` – build output (usually not committed unless you serve statically)

## Auto-generated documentation

Use `halguru-generate-manual.sh` to generate documentation for hal.guru CLI, YAML files and JSON schemas for Visual Studio Code.

After running the script:

1. Files will be generated in the `docs/halguru-cli` and `docs/models` folders. The generated file names will start with the character `(`.
2. YAML schemas will be generated in the `docs/schemas` folder (their names will end with `-schema.json`).
3. The `nav` section in the `mkdocs.yml` configuration file will be populated with the generated entries, and documentation version number will be updated.

Automatically generated files are not versioned in the GitHub repository (see [.gitignore](.gitignore)

Each updated section is located between two comments:

```yaml
# Autogenerated SectionName Begin
# Autogenerated SectionName End
```

## Macros – quick start

- Define macros and global variables in `macros.py` (at project root).
- Use Jinja2 in .md files, e.g., `{{ variable }}` or `{% if %}…{% endif %}`.

Example macros and variables:

```python
def define_env(env): # Global variables: env.variables.project = { "name": "hal.guru", "url": "[https://example.com](https://example.com)", "year": 2025, }

    # Simple macro:

    @env.macro
    def badge(text, color="blue"):
        return f'<span class="mdx-badge" style="background:{color};padding:2px 6px;border-radius:4px;color:#fff;">{text}</span>'
    
    # Macro with parameters and logic:
    
    @env.macro
    def version_label(version, stable="stable", prefix="v"):
        label = stable if not any(c.isalpha() for c in version) else "pre"
        return f"{prefix}{version} · {label}"
```

Use in Markdown:

```markdown
# Welcome to {{ project.name }}

Current year: {{ project.year }}
Macro – badge: {{ badge("READY", "green") }}
Version: {{ version_label("1.2.0") }}
```

Working with data

- You can load JSON/YAML files and expose them as variables.
- Easiest is to load files from `docs/data` (or include_dir) inside `macros.py` and assign to `env.variables`.

Example:

```python
import json from pathlib import Path
def define_env(env): 
    data_path = Path("docs/data/services.json") 
    if data_path.exists(): 
        env.variables.services = json.loads(data_path.read_text(encoding="utf-8"))
```

In Markdown:

```markdown
## Services

{% for s in services %}
- {{ s.name }} — {{ s.desc }} 
{% endfor %}
```

Best practices

- Keep logic inside macros.py to keep Markdown clean.
- Use short, clear macro names.
- Centralize globals (e.g., project, author, links) in one place.
- Store reusable data (tables, lists) in JSON/YAML under docs/data/.
- Leverage admonitions (note, tip, warning) for highlights.
- Enable code highlight and copy features in Material.

Debugging

- Inspect variables by temporarily printing {{ variables | pprint }} in a .md file.
- Jinja errors are printed in the mkdocs serve console.
- If a macro fails, verify macros.py path/name and the plugins section in mkdocs.yml.

## Links

1. [mkdocs - getting started](https://www.mkdocs.org/getting-started/)
