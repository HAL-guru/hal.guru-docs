# hal.guru

The [hal.guru-docs](https://github.com/HAL-guru/hal.guru-docs) repository contains the source for our technical documentation on building, publishing, and maintaining AI agents with the hal.guru platform. It’s the single place to learn workflows, tooling, and best practices—from local setup to advanced automation. To browse the rendered docs, visit [docs.hal.guru](https://docs.hal.guru). 

### Contributions are welcome

[Open an issue](https://github.com/HAL-guru/hal.guru-docs) to propose changes or submit a pull request to improve [the content](https://github.com/HAL-guru/hal.guru-docs).

### Releases

Published builds of the halguru CLI are available under this repository’s [Releases](https://github.com/HAL-guru/hal.guru-docs/releases) page.

## Installation

The tools required to **build** and **serve** this documentation locally are: 

* [MkDocs](https://www.mkdocs.org) (a static site generator for Markdown); 
* [the Material for MkDocs theme](https://squidfunk.github.io/mkdocs-material/) (providing UI, navigation, search, and components); 
* [mkdocs-macros-plugin](https://mkdocs-macros-plugin.readthedocs.io/en/latest/) (enabling Jinja2-powered macros and variables for dynamic content in Markdown);
* [mkdocs-exclude](https://github.com/timvink/mkdocs-exclude) (excluding files and directories from the build);
* [mkdocs-git-revision-date-localized-plugin](https://timvink.github.io/mkdocs-git-revision-date-localized-plugin/) (showing localized “last updated” dates based on Git metadata).

### Prerequisites

- [Python](https://www.python.org) 3.8+
- [pip](https://pypi.org/project/pip/) or [pipx](https://pipx.pypa.io/stable/)

### Install MkDocs theme and plugins

```bash
pip install mkdocs-material 
pip install mkdocs-macros-plugin
pip install mkdocs-exclude
pip install mkdocs-git-revision-date-localized-plugin
```

## Run locally

Start a live‑reload development server to preview changes as you edit. From the project root, run:

```bash
mkdocs serve
```

- Open the URL shown in the terminal (typically http://127.0.0.1:8000).
- Edits to Markdown, assets, and configuration trigger an automatic rebuild.
- Press **Ctrl+C** to stop the server.

## Build for production

Build the site for deployment. From the project root, run:

```bash
mkdocs build
```

- Output files will be written to `site/`.
- Use `--clean` to remove stale files from previous builds:
  ```bash
  mkdocs build --clean
  ```
- Use `--strict` to treat warnings as errors (recommended for Continuous Integration):
  ```bash
  mkdocs build --strict
  ```
- Serve the built site with any static file server (e.g., Python’s http.server):
  ```bash
  python -m http.server -d site 8000
  ```

## Project structure

- `mkdocs.yml` – main mkdocs config
- `macros.py` – [macro and variable definitions](#macros--quick-start)
- `overrides/custom.css` - additional CSS settings for the generated site
- `overrides/partials/` - custom HTML partials
- `docs/**` – documentation sources (Markdown, media)
- `docs/drafts/**` - work-in-progress documents
- `docs/assets/` – images, java script files, extra assets
- `docs/schemas/*-schema.json` - schemas for YAML files ([auto-generated](#auto-generated-documentation))

> **Note:** The `*.draft.md` and `docs/**` files are excluded from the build by default.

## Markdown file headers

Every Markdown file should include a YAML front matter header that defines:
- **title**: the page title
- **description**: a brief summary of what the page contains
- **author**: the page’s author

The YAML front matter should be placed at the beginning of the file and enclosed by three dashes. 
Example YAML header:
```yaml
---
title: Getting Started
description: A quick introduction to the project and how to set it up.
author: John Smith
---
```

Optional header values:
- **draft**: `true` or `false` — marks the document as a work in progress (WIP)
- **autogenerated**: `true` or `false` — indicates the content was generated by the `halguru` CLI
- **core_version**: e.g., `1.2.0` — the described version of AI Agents Core
  (used usually in automatically generated files)
- **last_updated**: e.g., `2024-07-15` — the timestamp (YYYY-MM-DD) of the last update (used only in automatically generated files)
- **status**:  e.g., `beta` — the status of the described feature. If not specified, the default is `ga`.
  - **planned** — work is on the roadmap or in design; no committed release date.
  - **experimental** — very early and unstable; behavior and APIs may change frequently; meant for feedback, not production.
  - **alpha** — partially implemented and risky; limited testing; breaking changes are likely.
  - **beta** — functionally complete but may contain bugs; suitable for wider testing; use with caution in production.
  - **ga** (general availability) — stable, supported, and production‑ready; backward compatibility and support are expected.
  - **deprecated** — still available but discouraged; scheduled for future removal; a migration path is typically provided.
  - **removed** — no longer available; migration to an alternative or newer version is required.

Notes:
- In the future, build pipelines can use the draft flag to exclude work-in-progress documents from production.
- The generated flag can help distinguish human-authored content from machine-generated outputs for review and auditing.

## Auto-generated documentation

If you want to include auto-generated files in the documentation, install the `halguru` command-line tool. It can produce documentation artifacts prefixed with `autogen-` directly from your project configuration, keeping the docs in sync with your CLI commands, YAML models, and schema definitions.

### [Installation on macOS and Linux](https://docs.hal.guru/installation/macos-and-linux/)

To install the **stable** release of the `halguru` CLI:

```bash
curl -sSL https://docs.hal.guru/halguru-install.sh | bash
```

To install the **pre-release** release of the `halguru` CLI:

```bash
curl -sSL https://docs.hal.guru/halguru-install.sh | bash -s -- --prerelease
```

#### [Installation on Windows](https://docs.hal.guru/installation/windows/)

To install the **stable** release of the `halguru` CLI:

```powershell
irm https://docs.hal.guru/halguru-install.ps1 | iex
```

To install the **pre-release** release of the `halguru` CLI:

```powershell
iex "& { $(irm https://docs.hal.guru/halguru-install.ps1) } --prerelease"
```

### Generate documentation

To generate documentation for hal.guru CLI, YAML documentation files, and JSON schemas for Visual Studio Code, from the project root, run:

```bash
halguru manual --generate-version-file docs/autogen-docs-version.txt --overwrite
halguru manual --generate-cli-docs docs/cli --overwrite
halguru manual --generate-schemas docs/schemas --overwrite
halguru manual --generate-agent-yaml-docs docs/yaml-agent --overwrite
halguru manual --generate-state-yaml-docs docs/yaml-state --overwrite
halguru manual --generate-action-yaml-docs docs/yaml-action --overwrite
halguru manual --generate-webscraping-yaml-docs docs/yaml-webscraping --overwrite
```

- All generated files start with the `autogen-` prefix.
- These files are not tracked in the GitHub repository (see the file `.gitignore`).

## Html in Markdown

The documentation is written in Markdown. You can use HTML tags in Markdown files.

```html
<div id="my-widget">
    <p>Loading...</p>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const widget = document.getElementById('my-widget');
    widget.innerHTML = '<p>Current time: ' + new Date().toLocaleTimeString() + '</p>';
});
</script>
```
## Macros – quick start

- Define macros and global variables in `main.py` (at project root).
- Use Jinja2 in .md files, e.g., `{{ variable }}` or `{% if %}…{% endif %}`.

### Example macros and variables

```python
def define_env(env): 
    env.variables.project = { "url": "[hal.guru](https://hal.guru)", "year": 2025, }

    @env.macro
    def badge(text, color="blue"):
        return f'<span class="mdx-badge" style="background:{color};padding:2px 6px;border-radius:4px;color:#fff;">{text}</span>'
    
    @env.macro
    def version_label(version, stable="stable", prefix="v"):
        label = stable if not any(c.isalpha() for c in version) else "pre"
        return f"{prefix}{version} · {label}"
```

Use in Markdown:

```markdown
# Welcome to {{ project.name }}

Current year: {{ project.year }}
Macro – badge: {{ badge("READY", "green") }}
Version: {{ version_label("1.2.0") }}
```

### Working with data

- You can load JSON/YAML files and expose them as variables.
- Easiest is to load files from `docs/` (or include_dir) inside `main.py` and assign to env.variables.

Example:

```python
import json from pathlib import Path
def define_env(env): 
    data_path = Path("docs/data/services.json") 
    if data_path.exists(): 
        env.variables.services = json.loads(data_path.read_text(encoding="utf-8"))
```

In Markdown:

```markdown
## Services

{% for s in services %}
- {{ s.name }} — {{ s.desc }} 
{% endfor %}
```

### Best practices

- Keep logic inside macros.py to keep Markdown clean.
- Use short, clear macro names.
- Centralize globals (e.g., project, author, links) in one place.
- Store reusable data (tables, lists) in JSON/YAML under docs/data/.
- Leverage admonitions (note, tip, warning) for highlights.
- Enable code highlight and copy features in Material.

### Debugging

- Inspect variables by temporarily printing `{{ variables | pprint }}` in a `.md` file.
- Jinja errors are printed in the `mkdocs serve` console.


## Heading Symbol Guide

For chapter titles, use the following symbols:

| Symbol  | Description           |
|---------|-----------------------|
| ↗       | External links        |
| →       | Internal links        |
| ▷       | CLI command or option |

You can prepend these symbols to headings to convey intent at a glance. For example:
- `→ [Installation Guide](../installation/index.md)` indicates a section that links within this documentation.
- `↗ [JSON Schema Reference](https://json-schema.org)` points to authoritative external resources.
- `▷ halguru about --system` marks a command-line option or usage section.
